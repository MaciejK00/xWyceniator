import com.example.demo.entity.Land;
import com.example.demo.common.MediaEnum;
import com.example.demo.prices.TypePrice;
import com.example.demo.prices.MediaPrice;
import com.example.demo.prices.SizePrice;

import java.util.Arrays;
import java.util.List;

global com.example.demo.prices.MediaPrice mediaPrice;

declare MediaPriceFact
    mediaList : List
    price : double
end


rule "Define Media Prices"
    no-loop
    when
        not MediaPriceFact()
    then
        insert(new MediaPriceFact(Arrays.asList(MediaEnum.POWER.getName()), 1000.0));
        insert(new MediaPriceFact(Arrays.asList(MediaEnum.WATER.getName()), 2000.0));
        insert(new MediaPriceFact(Arrays.asList(MediaEnum.GAS.getName()), 3000.0));
        insert(new MediaPriceFact(Arrays.asList(MediaEnum.SEWER.getName()), 4000.0));
end


rule "Set Media Price"
    when
        $land : Land($media : media)
        $priceFact : MediaPriceFact($mediaList : mediaList)
        eval($media.containsAll($mediaList) && $mediaList.containsAll($media))
    then
        mediaPrice.setPrice($priceFact.getPrice());
end
